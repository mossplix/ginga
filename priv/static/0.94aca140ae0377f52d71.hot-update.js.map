{"version":3,"sources":["webpack:///./web/static/js/app/reducers/userReducer.js?a0e6"],"names":[],"mappings":"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","file":"0.94aca140ae0377f52d71.hot-update.js","sourcesContent":["import ActionTypes  from '../constants';\n\nconst initialState = {\n  fetching: true\n};\n\nfunction stremUrl(){\n        return URL.createObjectURL(_me.stream);\n\n    }\n\nfunction cameraOn() {\n        getUserMedia(function (err, stream) {\n            if (err) {\n                console.error(err);\n            } else {\n                _me.stream = stream;\n            }\n        });\n}\nfunction cameraOff() {\n        if (_me.stream) {\n            _me.stream.stop();\n            _me.stream = null;\n        }\n}\n\nfunction updateIdlePresence() {\n        var update = {\n            status: _me.status,\n            show: _me.show,\n            caps: app.api.disco.caps\n        };\n\n        if (!app.state.active) {\n            update.idle = {since: app.state.idleSince};\n        }\n\n        app.api.sendPresence(update);\n}\n\n\nfunction save() {\n\n    var data = {\n        jid: _me.jid.bare,\n        avatarID: _me.avatarID,\n        status: _me.status,\n        rosterVer: _me.rosterVer\n    };\n    app.storage.profiles.set(data);\n}\n\nfunction load() {\n\n\n        var self = this;\n\n        app.storage.profiles.get(app.jid, function (err, profile) {\n            if (!err) {\n                _me.status = profile.status;\n                _me.avatarID = profile.avatarID;\n                self.save();\n\n                client.sendPresence({\n                    status: _me.status,\n                    caps: client.disco.caps\n                });\n                window.me=_me;\n            }\n\n           /*\n           put in contacts model\n           app.storage.roster.getAll(me.jid.bare, function (err, contacts) {\n                if (err) return;\n\n                contacts.forEach(function (contact) {\n                    contact = new Contact(contact);\n                    contact.owner = self.jid.bare;\n                    contact.inRoster = true;\n                    contact.save();\n                    self.contacts.add(contact);\n                });\n\n                self.contacts.trigger('loaded');*/\n            });\n}\n\nfunction setAvatar(id, type, source) {\n\n        fetchAvatar('', id, type, source, function (avatar) {\n            _me.avatarID = avatar.id;\n            _me.avatar = avatar.uri;\n        });\n}\n\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case ActionTypes.USER_CHANGE_JID:\n            //UserStore.load();\n            return { ...state };\n        case ActionTypes.USER_CHANGE_ACTIVE:\n            //UserStore.updateIdlePresence();\n          \n            return { ...state };\n        case ActionTypes.USER_CHANGE_STATUS:\n          \n            //UserStore.save();\n            return { ...state };\n        case ActionTypes.USER_CHANGE_ROSTER_VERSION:\n          \n            //UserStore.save();\n            return { ...state };\n        case ActionTypes.USER_CHANGE_AVATARID:\n            //UserStore.save();\n          \n\n            return { ...state };\n        case ActionTypes.CLIENT_ON_SESSION_STARTED:\n            //UserStore.load();\n\n            return { ...state };\n\n        case ActionTypes.CLIENT_ON_CREDENTIALS_UPDATE:\n            creds=action.creds;\n            if (creds.clientKey && creds.serverKey) {\n                delete creds.password;\n                delete creds.saltedPassword;\n            } else if (creds.saltedPassword) {\n                delete creds.password;\n            }\n\n            localStorage.config = JSON.stringify({\n                jid: client.config.jid.bare,\n                server: client.config.server,\n                wsURL: client.config.wsURL,\n                credentials: creds\n            });\n\n\n\n            return { ...state };\n\n\n    default:\n      return state;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./web/static/js/app/reducers/userReducer.js\n **/"],"sourceRoot":""}