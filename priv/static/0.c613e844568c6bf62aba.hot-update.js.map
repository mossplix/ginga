{"version":3,"sources":["webpack:///./web/static/js/app/selectors/index.js?7208"],"names":[],"mappings":"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","file":"0.c613e844568c6bf62aba.hot-update.js","sourcesContent":["import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nconst messageListByQuerySelector = state => state.messageListByQuery;\nconst threadsByIDSelector = state => state.threads;\nconst roomsByIDSelector = state => state.rooms;\nconst messagesByIDSelector = state => state.messages;\n\nexport const isLoadingSelector = state => state.isLoading;\nexport const labelsSelector = state => state.labels;\nexport const threadsSelector = state => state.threads;\nexport const searchQuerySelector = state => state.app.searchQuery;\nexport const selectedMessageIDSelector = state => state.currentChat.messageID;\nexport const selectedIDSelector = state => state.currentChat.id;\n\nexport const selectedRoomIDSelector = state => state.currentChat.roomID;\n\nexport const selectedSuggestionBox  = state => state.currentSuggestion.id;\nexport const suggestionsSelector = state => state.suggestions;\n\n\n\nconst jidSelector = state => state.xmpp.jid;\n\n\n\nexport const allThreadsSelector = createSelector([\n  searchQuerySelector,\n  messageListByQuerySelector,\n  threadsByIDSelector,\n], (\n  searchQuery,\n  messageListByQuery,\n  threadsByID,\n) => {\n  const threadList = messageListByQuery[searchQuery];\n  return threadList ?\n    threadList.threadIDs.map(threadID => threadsByID[threadID]) :\n    [];\n});\n\n\nexport const currentThreadMessagesSelector = createSelector([\n    messagesByIDSelector,\n  selectedIDSelector,\n        jidSelector\n], (\n  messages,\n  id,\n      jid\n) => {\n     var from_messages=_.filter(messages,{from:id,to: jid});\n      var   my_messages=_.filter(messages,{from:jid,to:id});\n    const toret= _.uniqBy(from_messages.concat(my_messages), function(elem) { return [elem.from,elem.to,elem.created,elem.text].join(); });\n    return _.orderBy(toret,[\"created\"],['desc']);\n});\n\n\nexport const selectedThreadMessagesSelector = createSelector([\n  threadsByIDSelector,\n  selectedIDSelector,\n  messagesByIDSelector,\n], (\n  threadsByID,\n  selectedThreadID,\n  messagesByID,\n) => {\n  const selectedThread = threadsByID[selectedThreadID];\n  return selectedThread &&\n    selectedThread.messageIDs.map(messageID => messagesByID[messageID]);\n});\n\n\n\nexport const selectedSuggestionSelector = createSelector([\n  suggestionsSelector,\n selectedSuggestionBox\n], (\n  suggestions,\n  message_box_id\n) => {\n        var id = message_box_id||null;\n  const suggestion = suggestions[id];\n  return suggestion;\n});\n\n\nexport const chronoThreadsSelector=createSelector([threadsSelector],(threads\n    ) => {\n        var orderedThreads = [];\n    for (var id in threads) {\n      var thread = threads[id];\n      orderedThreads.push(thread);\n    }\n    orderedThreads.sort(function(a, b) {\n        if (!a.lastMessage === null) {\n\n            if (a.lastMessage._created < b.lastMessage._created) {\n                return -1;\n            } else if (a.lastMessage._created > b.lastMessage._created) {\n                return 1;\n            }\n        }else{\n            return -1;\n        }\n      return 0;\n\n    });\n    return orderedThreads;\n    }\n\n);\n\n\nexport const lastMessageInEachThreadSelector = createSelector([\n  messagesByIDSelector,\n  threadsSelector\n], (\n  messagesByID,\n  threads\n) => {\n  return threads && _.toArray(threads).map(\n    thread => messagesByID[_.last(thread.messageIDs)]\n  );\n});\n\nexport const hasMoreThreadsSelector = createSelector([\n  searchQuerySelector,\n  messageListByQuerySelector,\n], (\n  searchQuery,\n  messageListByQuery,\n) => {\n  const threadList = messageListByQuery[searchQuery];\n  return !threadList || !!threadList.nextPageToken;\n});\n\nexport const loadedThreadCountSelector = createSelector([\n  searchQuerySelector,\n  messageListByQuerySelector,\n], (\n  searchQuery,\n  messageListByQuery,\n) => {\n  const threadList = messageListByQuery[searchQuery];\n  return threadList ? threadList.threadIDs.length : 0;\n});\n\nexport const nextMessageSelector = createSelector([\n  lastMessageInEachThreadSelector,\n  selectedMessageIDSelector,\n], (\n  messages,\n  selectedMessageID\n) => {\n  if (!messages) {\n    return null;\n  }\n\n  const selectedMessageIndex = selectedMessageID &&\n    messages.findIndex(\n      msg => msg.id === selectedMessageID\n    );\n\n  if (!selectedMessageID) {\n    return messages[0];\n  } else if (selectedMessageIndex < 0 || selectedMessageIndex === messages.length) {\n    return null;\n  } else {\n    return messages[selectedMessageIndex + 1];\n  }\n});\n\nexport const prevMessageSelector = createSelector([\n  lastMessageInEachThreadSelector,\n  selectedMessageIDSelector,\n], (\n  messages,\n  selectedMessageID\n) => {\n  if (!messages) {\n    return null;\n  }\n\n  const selectedMessageIndex = selectedMessageID &&\n    messages.findIndex(\n      msg => msg.id === selectedMessageID\n    );\n\n  if (!selectedMessageID) {\n    return messages[0];\n  } else if (selectedMessageIndex < 0 || selectedMessageIndex === 0) {\n    return null;\n  } else {\n    return messages[selectedMessageIndex - 1];\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/static/js/app/selectors/index.js\n **/"],"sourceRoot":""}