{"version":3,"sources":["webpack:///./web/static/js/app/actions/xmppActions.js?aeff"],"names":[],"mappings":"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","file":"0.ca8ebba13625e4829e17.hot-update.js","sourcesContent":["/*global me, app, client*/\n\"use strict\";\n\nvar _ = require('underscore');\nvar async = require('async');\nvar crypto = require('crypto');\nvar bows = require('bows');\nvar uuid = require('node-uuid');\nvar XmppUtils = require(\"../utils/XmppUtils\");\n\nvar contactSchema = require(\"../models/contact\");\nvar messageSchema = require(\"../models/message\");\nvar mucSchema = require(\"../models/muc\");\nvar uuid = require('node-uuid');\n\n\nvar Muc=new mucSchema();\nvar Message = new messageSchema();\nvar Contact = new contactSchema();\n\n\nimport ActionTypes  from '../constants';\nimport { httpGet, httpPost, httpDelete }  from '../utils';\n\n\nvar log = bows('Otalk');\nvar ioLogIn = bows('<< in');\nvar ioLogOut = bows('>> out');\n\nexport function discoCapsQueue(pres)\n{\n    async.queue(function (pres, cb) {\n    var jid = pres.from;\n    var caps = pres.caps;\n\n\n    var resource = Resource.get(jid);\n\n    client.getDiscoInfo(jid, caps.node + '#' + caps.ver, function (err, result) {\n        if (err) {\n            log.error('Couldnt get info for ' + caps.ver);\n            return cb();\n        }\n        if (client.verifyVerString(result.discoInfo, caps.hash, caps.ver)) {\n            log.info('Saving info for ' + caps.ver);\n            var data = result.discoInfo;\n        } else {\n            log.info('Couldnt verify info for ' + caps.ver + ' from ' + jid);\n            cb();\n        }\n    });\n})}\n\nexport function loadRooms(){\n     return (dispatch, getState) =>\n    {\n          httpGet('/api/v1/rooms')\n         .then((data) => {\n        dispatch({\n          type:ActionTypes.LOAD_ROOMS,\n          rooms: data,\n        });\n\n\n      });\n\n    }\n\n\n}\n\n\nexport function leaveRoom(){\n     return (dispatch, getState) =>\n    {\n        var {user,jid} = store.getState().xmpp;\n        var nick=\"\";\n        if(user){\n            nick=user.first_name;\n        }\n\n            client.leaveRoom(jid, nick);\n\n\n    }\n\n\n}\n\n\n\nfunction convMessage(msg){\n      var ts = Date.now();\n      var timestamp;\n      if (msg.delay){\n          timestamp=msg.delay.stamp;\n      }\n    else{\n          timestamp=ts;\n      }\n      var data = {\n          archivedId: msg.id || uuid.v4(),\n          owner: msg.owner||msg.from.bare,\n          to: msg.to.bare,\n          text:msg.body,\n          from: msg.from.bare,\n          body: msg.body,\n          type: msg.type,\n          delay: msg.delay,\n          edited: msg.edited,\n          created: msg.timestamp||timestamp,\n          from_full: msg.from,\n          to_full:msg.to\n      };\n      return Object.assign({},Message,msg,data);\n\n}\n\nexport function   getAllMessages() {\n\n    return (dispatch, getState) =>\n    {\n\n        const {xmpp} = getState();\n        const client = xmpp.client;\n        const jid = xmpp.jid;\n\n\n\n    }\n\n}\n\n\n\n\n\nexport function   getRoster(){\n\n        client.getRoster(function (err, resp) {\n            \n\n            if (resp.roster && resp.roster.items && resp.roster.items.length) {\n\n\n                _.each(resp.roster.items, function (item) {\n                    var data = {\n                        owner:resp.to.bare,\n                        jid: item.jid.jid,\n                        nickname: item.local,\n                        name: item.name,\n                        groups: item.groups,\n                        subscription: item.subscription,\n                        avatarID: \"\",\n                        resources: {},\n                        offlineStatus:{}\n                    };\n\n                });\n\n                var caps = client.updateCaps();\n\n                    client.sendPresence();\n                    client.enableCarbons();\n\n            }});\n\n    }\n\n\n\n\n    export function receiveContacts(rawContacts) {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_CONTACTS,\n            rawContacts: rawContacts\n        });\n    }\n\n\n   export function searchHistory(jid){\n\n\n\n     client.searchHistory({\n                with: jid,\n                rsm: {max: 500, before: true},\n                complete: false\n            }, function (err, res) {\n                if (res.mamResult) {\n                    var items = res.mamResult.items || [];\n                }else{\n                    var items=[];\n                }\n\n                var msgList = items.map(function (x) {\n                    return Object.assign(Message, x.forwarded.message, {\n                        id: x.forwarded.message.id,\n                        from: x.forwarded.message.from.bare,\n                        to: x.forwarded.message.to.bare,\n                        created: x.forwarded.delay.stamp,\n                        text:x.forwarded.message.body\n                    })\n                });\n\n                dispatch({\n                    type: ActionTypes.LOAD_MESSAGES,\n                    messages: msgList,\n\n                });\n            });\n}\n\n\n\n    export function receiveCreatedContact(createdContact) {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_CREATED_CONTACTS,\n            createdContact: createdContact\n        });\n    }\n\n    export function receiveMucs(rawMucs) {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_MUCS,\n            rawMucs: rawMucs\n        });\n    }\n\n\n\n    export function  receiveCreatedMuc(createdMuc) {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_CREATED_MUC,\n            createdMuc: createdMuc\n        });\n    }\n\n\n\nexport function xmppSession(client,dispatch,jid) {\n\n    client.on('*', function (name, data) {\n        if (name === 'raw:incoming') {\n            ioLogIn.debug(data.toString());\n        } else if (name === 'raw:outgoing') {\n            ioLogOut.debug(data.toString());\n        }\n    });\n\n    client.on('credentials:update', function (creds) {\n        client.config.credentials = creds;\n            dispatch({\n             type: ActionTypes.CLIENT_ON_CREDENTIALS_UPDATE,\n                creds:creds\n          });\n\n    });\n\n    client.on('disconnected', function (err) {\n\n        dispatch(\n            {\n             type: ActionTypes.CLIENT_ON_DISCONNECTED,\n              err: err\n            }\n        );\n\n    });\n\n    client.on('auth:failed', function () {\n\n        dispatch(\n            {\n            type: ActionTypes.CLIENT_ON_AUTHFAILED\n        }\n        );\n\n    });\n\n    client.on('stream:management:resumed', function () {\n        dispatch({\n           type: ActionTypes.CLIENT_ON_STREAM_MANAGEMENT_RESUMED\n        });\n\n    });\n\n    client.on('session:started', function (jid) {\n\n        client.sendPresence();\n         var caps = client.updateCaps();\n\n                client.sendPresence({\n                    status: '',\n                    caps: client.disco.caps\n                });\n                client.enableCarbons();\n\n\n\n\n         client.searchHistory({\n                to: jid.bare,\n                rsm: {max: 500, before: true},\n                complete: false\n            }, function (err, res) {\n                if (res && res.mamResult) {\n                    var items = res.mamResult.items || [];\n                }else{\n                    var items=[];\n                }\n\n                var messages = items.map(function (x) {\n                    return Object.assign({},Message, x.forwarded.message, {\n                        id:  x.forwarded.message.id,\n                        from: x.forwarded.message.from.bare,\n                        to: x.forwarded.message.to.bare,\n                        created: x.forwarded.delay.stamp,\n                        text:x.forwarded.message.body\n                    })\n                });\n\n                dispatch({\n                    type: ActionTypes.LOAD_MESSAGES,\n                    messages: messages,\n\n                });\n            });\n\n            client.searchHistory({\n                from: jid.bare,\n                rsm: {max: 500, before: true},\n                complete: false\n            }, function (err, res) {\n                var itemList = res.mamResult.items || [];\n\n                var msgList = itemList.map(function (x) {\n                    return Object.assign({},Message, x.forwarded.message, {\n                        id:  x.forwarded.message.id,\n                        from: x.forwarded.message.from.bare,\n                        to: x.forwarded.message.to.bare,\n                        created: x.forwarded.delay.stamp,\n                        text:x.forwarded.message.body,\n                    })\n                });\n\n                dispatch({\n                    type: ActionTypes.LOAD_MESSAGES,\n                    messages: msgList,\n\n                });\n            });\n\n        client.getRoster(function (err, resp) {\n            if (resp.roster && resp.roster.items && resp.roster.items.length) {\n\n                var items = resp.roster.items;\n\n                var contacts= items.map(function (item) {\n                    return Object.assign({},Contact, {\n                        owner:resp.to.bare,\n                        jid: item.jid.bare,\n                        nickname: item.jid.local,\n                        name: item.name,\n                        groups: item.groups,\n                        subscription: item.subscription,\n                        avatarID: \"\",\n                        resources: {},\n                        offlineStatus:{}\n                    });\n\n                });\n\n                dispatch({\n                    type: ActionTypes.LOAD_CONTACTS,\n                    contacts: contacts,\n\n                });\n            }\n\n\n\n\n\n        });\n\n         client.getBookmarks(function (err, res) {\n                if (err) return;\n\n                var mucs = res.privateStorage.bookmarks.conferences || [];\n\n             dispatch({\n                    type: ActionTypes.LOAD_MUCS,\n                    mucs: mucs,\n\n                });\n\n            });\n\n\n\n        dispatch({\n            type: ActionTypes.CLIENT_ON_SESSION_STARTED,\n            jid: jid,\n            client: client\n        });\n\n        });\n\n\n\n\n    client.on('roster:update', function (iq) {\n        iq = iq;\n         dispatch({\n            type: ActionTypes.CLIENT_ON_ROSTER_UPDATE,\n            iq:iq\n        });\n\n    });\n\n    client.on('subscribe', function (pres) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_SUBSCRIBE,\n            pres:pres\n        });\n\n    });\n\n    client.on('available', function (pres) {\n        \n        dispatch({\n            type: ActionTypes.CLIENT_ON_AVAILABLE,\n            pres: pres\n        });\n\n    });\n\n    client.on('unavailable', function (pres) {\n        \n        dispatch({\n            type: ActionTypes.CLIENT_ON_UNAVALILABLE,\n            pres: pres\n        });\n\n    });\n\n    client.on('avatar', function (info) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_AVATAR,\n            info: info\n        });\n\n    });\n\n    client.on('chatState', function (info) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_CHAT_STATE,\n            info: info\n        });\n\n    });\n\n    client.on('chat', function (msg) {\n\n        \n         dispatch({\n            type: ActionTypes.CLIENT_ON_CHAT,\n            msg: convMessage(msg)\n        });\n\n    });\n\n    client.on('groupchat', function (msg) {\n        \n         dispatch({\n            type: ActionTypes.CLIENT_ON_GROUPCHAT,\n            msg: convMessage(msg)\n        });\n\n\n    });\n\n    client.on('groupchat:subject', function (msg) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_GROUPCHAT_SUBJECT,\n            msg: convMessage(msg)\n        });\n\n\n    });\n\n    client.on('replace', function (msg) {\n        \n        dispatch({\n            type: ActionTypes.CLIENT_ON_REPLACE,\n            msg: convMessage(msg)\n        });\n\n\n    });\n\n    client.on('receipt', function (msg) {\n        \n        dispatch({\n            type: ActionTypes.CLIENT_ON_RECEIPT,\n            msg: convMessage(msg)\n        });\n\n\n    });\n\n    client.on('carbon:received', function (carbon) {\n\n        var mereg = new RegExp(jid);\n        if (!mereg.test(jid)) return ;\n\n        dispatch({\n            type: ActionTypes.CLIENT_ON_CARBON_RECEIVED,\n            carbon: carbon\n        });\n\n\n\n    });\n\n    client.on('carbon:sent', function (carbon) {\n        var mereg = new RegExp(jid);\n        if (!mereg.test(jid)) return ;\n         dispatch({\n            type: ActionTypes.CLIENT_ON_CARBON_SENT,\n            carbon: carbon\n        });\n\n\n    });\n\n    client.on('disco:caps', function (pres) {\n         dispatch({\n            type: ActionTypes.CLIENT_ON_DISCO_CAPS,\n            pres: pres\n        });\n        if (pres.caps.hash) {\n            log.info('Caps from ' + pres.from + ' ver: ' + pres.caps.ver);\n            discoCapsQueue(pres);\n        }\n    });\n\n    client.on('stanza:acked', function (stanza) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_STANZA_ACKED,\n            stanza: stanza\n        });\n\n    });\n\n    client.on('jingle:incoming', function (session) {\n         dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_INCOMING,\n            session: session\n        });\n\n    });\n\n    client.on('jingle:outgoing', function (session) {\n\n         dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_OUTGOING,\n            session: session\n        });\n\n    });\n\n    client.on('jingle:terminated', function (session) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_TERMINATED,\n            session: session\n        });\n\n    });\n\n    client.on('jingle:accepted', function (session) {\n         dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_ACCEPTED,\n            session: session\n        });\n\n    });\n\n    client.on('jingle:localstream:added', function (stream) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_LOCALSTREAM_ADDED,\n            stream: stream\n        });\n\n    });\n\n    client.on('jingle:localstream:removed', function () {\n         dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_LOCALSTREAM_REMOVED\n        });\n\n\n    });\n\n    client.on('jingle:remotestream:added', function (session) {\n       dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_REMOTESTREAM_ADDED,\n            session: session\n        });\n\n    });\n\n    client.on('jingle:remotestream:removed', function (session) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_REMOTESTREAM_REMOVED\n        });\n\n    });\n\n    client.on('jingle:ringing', function (session) {\n       dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_RINGING,\n            session: session\n        });\n\n    });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/static/js/app/actions/xmppActions.js\n **/"],"sourceRoot":""}