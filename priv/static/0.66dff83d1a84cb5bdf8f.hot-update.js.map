{"version":3,"sources":["webpack:///./web/static/js/app/models/message.js?5ac3"],"names":[],"mappings":"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","file":"0.66dff83d1a84cb5bdf8f.hot-update.js","sourcesContent":["module.exports= function() {return {\n\n    mid: '',\n    owner: '',\n    to: '',\n    from: '',\n    body: '',\n    type: 'normal',\n    acked:  false,\n    requestReceipt:  false,\n    receipt:  false,\n    archivedId: '',\n    oobURIs: [],\n    created: '',\n    _edited: '',\n    _mucMine: '',\n    receiptReceived:  false,\n    edited:  false,\n    delay: '',\n    mentions:  '',\n    from_full:'',\n    to_full:'',\n\n    isMine: function(){\n        var xmpp=store.getState().xmpp;\n      var mereg = new RegExp(xmpp.jid);\n        if (this.type === 'groupchat'){\n            return this.from_full.resource === xmpp.nickname\n\n        }else {\n\n            if (this.from_full.parts === undefined){\n                return mereg.test(this.from);\n            }\n            else {\n                return mereg.test(this.from_full.parts.bare);\n            }\n        }\n\n},\n\n    mine: function () {\n            return this.isMine();\n        },\n\n    sender:  function () {\n           var xmpp=store.getState().xmpp;\n           var _contacts = store.getState().contacts;\n            if (this.mine()) {\n                return _contacts[xmpp.jid];\n            } else {\n                if (this.type === 'groupchat'){\n                    return this.from_full.resource;\n\n                }\n\n                return _contacts[this.from];\n            }\n\n    },\n    getSenderAvatar: function(){\n        var sender=this.sender();\n        \n\n    },\n    delayed: function () {\n            return !!this.delay;\n        }\n    ,\n    getCreated: function () {\n            if (this.delay && this.delay.stamp) {\n                return this.delay.stamp;\n            }\n            if (this.created ==='')\n            {\n            return new Date(this.timestamp);\n          }else{\n            return new Date(this.created);\n          }\n\n    },\n    timestamp: function () {\n            if (this._edited && !isNaN(this._edited.valueOf())) {\n                return this._edited;\n            }\n            return this.getCreated();\n\n    },\n    formattedTime:  function () {\n            if (this.getCreated()) {\n              //moment().format(\"h:mm\");\n              function timeTodayDateElse(date){\n                  moment.locale('en', {\n        'calendar' : {\n            'lastDay' : 'D MMMM',\n             'sameDay' : 'h:mmA',\n            'nextDay' : 'D MMMM',\n            'lastWeek' : 'D MMMM',\n            'nextWeek' : 'D MMMM',\n            'sameElse' : 'D MMMM'\n       }\n    });\n\n    return moment(date).calendar();\n}\n\n              return timeTodayDateElse(this.getCreated());\n            }\n            return undefined;\n\n    },\n    pending: function () {\n            return !this.acked;\n\n    },\n    nickname: function () {\n            var _contacts=store.getState().contacts;\n            if (this.type === 'groupchat') {\n                return this.from_full.resource;\n            }\n            if (this.mine()) {\n                return 'me';\n            }\n            if (this.from_full.bare === undefined)\n            {\n            return _contacts[this.from].displayName();\n          }\n          else{\n            return _contacts[this.from].displayName();\n\n          }\n\n    },\n    processedBody:  function () {\n            var body = this.body;\n            if (this.meAction) {\n                body = body.substr(4);\n            }\n            body = htmlify.toHTML(body);\n            if (this.mentions) {\n                var existing = htmlify.toHTML(this.mentions);\n                var parts = body.split(existing);\n                body = parts.join('<span class=\"mention\">' + existing + '</span>');\n            }\n            return body;\n\n    }\n\n}}\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/static/js/app/models/message.js\n **/"],"sourceRoot":""}