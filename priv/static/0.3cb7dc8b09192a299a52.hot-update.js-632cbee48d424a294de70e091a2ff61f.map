{"version":3,"sources":["webpack:///./web/static/js/app/actions/chatActions.js?7f7a"],"names":[],"mappings":"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","file":"0.3cb7dc8b09192a299a52.hot-update.js","sourcesContent":["import ActionTypes  from '../constants';\nimport { push }           from 'react-router-redux';\nvar StanzaIO = require('stanza.io');\nvar htmlify = require('../helpers/htmlify');\nvar messageSchema = require(\"../models/message\");\n\nvar Message = new messageSchema();\n\nimport {getSelection,getMatchedPretext} from '../reducers/suggestionsReducer';\nexport function clickChannel(channelID) {\n\n    return dispatch => {\n        dispatch({\n            type: ActionTypes.CLICK_CHANNEL,\n            channelID: channelID\n        });\n\n    dispatch(push(`/chat/channels/${channelID}`));\n    }}\n\n\n\n\n\nfunction promise(callback){\n    return dispatch => {\n        console.log(dispatch);\n        dispatch(callback);\n         return Promise.resolve();\n    }\n\n}\n\n\nexport function clickThread(threadID) {\n    return dispatch => {\n    dispatch({\n      type: ActionTypes.CLICK_THREAD,\n      threadID: threadID\n    });\n\n    dispatch(push(`/chat/threads/${threadID}`));\n\n\n  }}\n\n\nexport function createMessage(text, chat) {\n    return (dispatch, getState) =>\n    {\n        dispatch({\n            type: ActionTypes.CREATE_MESSAGE,\n            message: message,\n            chat: chat,\n\n        });\n    }\n  }\n\n\n\nexport function sendMessage(text, chat_type,to,edit=false) {\n    return (dispatch, getState) =>\n\n    {\n        const client = getState().xmpp.client;\n        var links = _.map(htmlify.collectLinks(text), function (link) {\n                return {url: link};\n            });\n        var message =  {\n                id: client.nextId(),\n                to: new StanzaIO.JID(to),\n                type: chat_type,\n                body: text,\n                requestReceipt: true,\n                oobURIs: links,\n                chatState: 'active',\n            };\n\n        if (edit) {\n                 message.replace = getState().currentChat.lastSentMessage.id;\n            }\n\n\n        client.sendMessage(message);\n         message.from = getState().xmpp.jid;\n        message.text=message.body;\n        var ts = Date.now();\n\n        var t_message=Object.assign(Message, message, {\n                        from: getState().xmpp.jid,\n                        created: ts\n                    });\n        dispatch({\n            type: ActionTypes.MESSAGE_SENT,\n            message: message,\n            to: to,\n            chat_type:chat_type\n\n        });\n    }\n  }\n\n\nexport function joinRoom(room, nick) {\n    return (dispatch, getState) =>\n\n    {\n        const client = getState().xmpp.client;\n\n\n         client.joinRoom(room, nick, {\n            joinMuc: {\n                history: {\n                    maxstanzas: 50\n                }\n            }\n        });\n        dispatch({\n            type: ActionTypes.JOIN_ROOM,\n            room: room,\n            nick: nick,\n\n        });\n    }\n  }\n\n\nexport function publishAvatar(data) {\n    if (!data || data.indexOf('https://') != -1) return;\n    return (dispatch, getState) =>\n\n    {\n        const client = getState().xmpp.client;\n\n        var resampler = new Resample(data, 80, 80, function (data) {\n            var b64Data = data.split(',')[1];\n            var id = crypto.createHash('sha1').update(atob(b64Data)).digest('hex');\n            client.publishAvatar(id, b64Data, function (err, res) {\n                if (err) return;\n                client.useAvatars([{\n                  id: id,\n                  width: 80,\n                  height: 80,\n                  type: 'image/png',\n                  bytes: b64Data.length\n                }]);\n            });\n        });\n\n\n\n        dispatch({\n            type: ActionTypes.PUBLISH_AVATAR,\n            data: data,\n\n        });\n    }\n  }\n\n\nexport function removeContact(jid) {\n    return (dispatch, getState) =>\n\n    {\n        const client = getState().xmpp.client;\n\n\n        client.removeRosterItem(jid, function(err, res) {\n             dispatch({\n            type: ActionTypes.CONTACT_REMOVED,\n            jid: jid\n\n        });\n\n        });\n\n    }\n  }\n\n\nexport function addContact(jid) {\n    return (dispatch, getState) =>\n\n    {\n        const client = getState().xmpp.client;\n\n\n       client.sendPresence({to: jid, type: 'subscribe'});\n\n        dispatch({\n            type: ActionTypes.CONTACT_ADDED,\n            jid: jid\n\n        });\n\n    }\n  }\n\n\nexport function updateIdlePresence(state) {\n    return (dispatch, getState) =>\n\n    {\n        const client = getState().xmpp.client;\n\n        var update = {\n            status: state,\n            caps: client.disco.caps\n        };\n\n        if (!getState().appState.active) {\n            update.idle = {since: getState().appState.idleSince};\n        }\n\n\n\n         client.sendPresence(update);\n        dispatch({\n            type: ActionTypes.SEND_PRESENCE,\n            state:state,\n\n        });\n    }\n  }\n\nexport function sendPresence(state) {\n    return (dispatch, getState) =>\n\n    {\n        const client = getState().xmpp.client;\n\n\n         client.sendPresence(state);\n        dispatch({\n            type: ActionTypes.SEND_PRESENCE,\n            state:state,\n\n        });\n    }\n  }\n\n\n\n\n\n\n\n\n\n\n/*\ncall: function () {\n        if (this.jingleResources.length) {\n            var peer = this.jingleResources[0];\n            this.callState = 'starting';\n            app.api.call(peer.id);\n        } else {\n            logger.error('no jingle resources for this user');\n        }\n    }\n\n\n\n\n\n\nhandleAcceptClick: function (e) {\n        e.preventDefault();\n        var self = this;\n\n        this.$('button.accept').prop('disabled', true);\n        if (this.model.jingleCall.jingleSession.state == 'pending') {\n            if (!client.jingle.localStream) {\n                client.jingle.startLocalMedia(null, function (err) {\n                    if (err) {\n                        self.model.jingleCall.end({\n                            condition: 'decline'\n                        });\n                    } else {\n                        client.sendPresence({ to: new StanzaIo.JID(self.model.jingleCall.jingleSession.peer) });\n                        self.model.jingleCall.jingleSession.accept();\n                    }\n                });\n            } else {\n                client.sendPresence({ to: new StanzaIo.JID(this.model.jingleCall.jingleSession.peer) });\n                this.model.jingleCall.jingleSession.accept();\n            }\n        }\n        return false;\n    }\n\n      handleEndClick: function (e) {\n        e.preventDefault();\n        var condition = 'success';\n        if (this.model.jingleCall) {\n            if (this.model.jingleCall.jingleSession && this.model.jingleCall.jingleSession.state == 'pending') {\n                condition = 'decline';\n            }\n            this.model.jingleCall.end({\n                condition: condition\n            });\n        }\n        return false;\n    },\n\n    handleCallStateChange: function (model, callState) {\n        var state = callState || this.model.state;\n        // hide all\n        this.$buttons.hide();\n\n        var map = {\n            incoming: '.ignore, .answer',\n            outgoing: '.cancel',\n            accepted: '.end, .mute',\n            terminated: '',\n            ringing: '.cancel',\n            mute: '.end, .unmute',\n            unmute: '.end, .mute',\n            //hold: '',\n            //resumed: ''\n        };\n\n        console.log('map[state]', map[state]);\n\n        this.$(map[state]).show();\n    }\n});\n\n    */\n\n\n\n\n\n\n\n\n// contact requests\n\n\n\nexport function approveContactRequest(jid) {\n    return (dispatch, getState) =>\n\n    {\n        const client = getState().xmpp.client;\n\n        client.sendPresence({\n            to: jid,\n            type: 'subscribed'\n        });\n        client.sendPresence({\n          to: jid,\n          type: 'subscribe'\n        });\n\n\n        dispatch({\n            type: ActionTypes.CONTACT_REQUEST_APPROVED,\n            jid: jid\n\n        });\n    }\n  }\n\n\n\nexport function denyContactRequest(jid) {\n    return (dispatch, getState) =>\n\n    {\n        const client = getState().xmpp.client;\n\n        client.sendPresence({\n            to: jid,\n            type: 'unsubscribed'\n        });\n\n        dispatch({\n            type: ActionTypes.CONTACT_REQUEST_DENIED,\n            jid: jid,\n\n\n        });\n    }\n  }\n\n\n\n\n\nexport function leaveRoom(room_jid,nick) {\n    return (dispatch, getState) =>\n\n    {\n        const client = getState().xmpp.client;\n        client.leaveRoom(room_jid, nick);\n        dispatch({\n            type: ActionTypes.LEAVE_ROOM,\n            room_jid: room_jid,\n            nick: nick,\n\n        });\n    }\n  }\n\n\n\n\n\n\nexport function    receiveRawMessage(msg) {\n    return (dispatch, getState) =>\n    {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_MESSAGE,\n            msg: msg\n\n        });\n    }\n    }\n\nexport function receiveAll(rawMessages) {\n    return (dispatch, getState) =>\n    {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_MESSAGES,\n            rawMessages: rawMessages\n        });\n    }\n  }\n\n\n\n  export function receiveCreatedMessage(createdMessage) {\n    return (dispatch, getState) =>\n    {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_CREATED_MESSAGE,\n            rawMessage: createdMessage\n        });\n    }\n  }\n\n\n\n\nexport function selectNextSuggestion(suggestionId) {\n    return (dispatch, getState) =>\n    {\n        return new Promise((resolve) => { dispatch({\n            type: ActionTypes.SUGGESTION_SELECT_NEXT,\n            id: suggestionId\n        });resolve(false);}).then(() => dispatch({\n                        type: ActionTypes.SUGGESTIONS_CHANGED,\n                        id:suggestionId\n\n                        })   );\n\n}}\n\nexport function selectPreviousSuggestion(suggestionId) {\n    return (dispatch, getState) =>\n    {\n        return new Promise((resolve) => { dispatch({\n            type: ActionTypes.SUGGESTION_SELECT_PREVIOUS,\n            id: suggestionId\n        }); resolve(false);} ).then(() => dispatch({\n                        type: ActionTypes.SUGGESTIONS_CHANGED,\n                        id:suggestionId,\n\n                        })  );\n    }\n}\n\n\n\nexport function suggestionChanged(suggestionId){\n     return (dispatch, getState) =>\n    {\n\n\n        return dispatch({\n            type: ActionTypes.SUGGESTIONS_CHANGED,\n            id: suggestionId,\n\n        });\n\n\n\n    }\n\n}\n\nfunction emitCompleteWordSuggestion(suggestionId, term = ''){\n\n    return (dispatch, getState) =>\n    {\n        var suggestions =getState().suggestions;\n        var suggestion =suggestions[suggestionId];\n        return dispatch({\n            type: ActionTypes.SUGGESTION_COMPLETE_WORD,\n            id: suggestionId,\n            term: term\n        });\n\n}}\n\nfunction completeWord(suggestionId, term = ''){\n    return (dispatch, getState) =>\n    {\n    return dispatch({\n                        type: ActionTypes.COMPLETE_WORD,\n                        id:suggestionId,\n                        term: term\n\n                        });\n}}\n\nexport function completeWordSuggestion(suggestionId, term = '') {\n    return (dispatch, getState) =>\n    {\n        var suggestions =getState().suggestions;\n        var suggestion =suggestions[suggestionId];\n        var term_t=term\n        return  new Promise((resolve) => { dispatch({\n            type: ActionTypes.SUGGESTION_COMPLETE_WORD,\n            id: suggestionId,\n            term: term\n        });resolve(false); }).then(() =>  dispatch({\n                        type: ActionTypes.COMPLETE_WORD,\n                        id:suggestionId,\n                        term: term_t\n\n                        })).then(() => dispatch({\n                        type: ActionTypes.SUGGESTIONS_CHANGED,\n                        id:suggestionId\n\n                        })   );\n    }\n}\n\n\n\n\nexport function registerSuggestions(suggestionId){\n     return {type: ActionTypes.REGISTER_SUGGESTION_BOX,id: suggestionId}\n\n\n\n    }\n\n\nexport function unregisterSuggestions(suggestionId){\n    return (dispatch, getState) =>\n    {\n        dispatch({type: ActionTypes.UNREGISTER_SUGGESTION_BOX,id: suggestionId});\n\n\n\n    }\n}\n\nexport function clearSuggestions(suggestionId){\n    return (dispatch, getState) =>\n    {\n        return new Promise((resolve) => { dispatch({type: ActionTypes.SUGGESTION_CLEAR_SUGGESTIONS,id: suggestionId});resolve(false);}).then(() => dispatch({\n                        type: ActionTypes.SUGGESTIONS_CHANGED,\n                        id:suggestionId\n\n                        })   );\n\n\n\n    }\n}\n\n\nexport function suggestionPretextChanged(suggestionId,pretext){\n    return (dispatch, getState) =>\n    {\n        return  new Promise((resolve) => { dispatch({type: ActionTypes.SUGGESTION_PRETEXT_CHANGED,\n                  id: suggestionId,\n                  pretext:pretext});\n\n         resolve(false); }).then(() => dispatch({\n                        type: ActionTypes.PRETEXT_CHANGED,\n                        id:suggestionId,\n                        pretext:pretext\n\n                         })\n\n\n        ).then(() => dispatch({\n                        type: ActionTypes.SUGGESTIONS_CHANGED,\n                        id:suggestionId\n\n                        }   ));\n\n\n\n    }\n}\n\n\nexport function handlePretextChanged(suggestionId,pretext)\n{\n\n    return (dispatch, getState) =>\n        {\n            if (pretext.startsWith('/')) {\n\n          httpGet(`/api/v1/commands/${CommandSuggestion}/`)\n          .then((data) => {\n\n                      var matches = [];\n                data.forEach((cmd) => {\n                    if (('/' + cmd.trigger).indexOf(command) === 0) {\n                        let s = '/' + cmd.trigger;\n                        let hint = '';\n                        if (cmd.auto_complete_hint && cmd.auto_complete_hint.length !== 0) {\n                            hint = cmd.auto_complete_hint;\n                        }\n                        matches.push({\n                            suggestion: s,\n                            hint,\n                            description: cmd.auto_complete_desc\n                        });\n                    }\n                });\n\n                matches = matches.sort((a, b) => a.suggestion.localeCompare(b.suggestion));\n\n                // pull out the suggested commands from the returned data\n                const terms = matches.map((suggestion) => suggestion.suggestion);\n\n                if (terms.length > 0) {\n                    return dispatch({\n                        type: ActionTypes.SUGGESTION_RECEIVED_SUGGESTIONS,\n                        id: suggestionId,\n                        matchedPretext: command,\n                        terms:terms,\n                        items: matches,\n                        component:component\n                    }).then( () => {\n\n                        dispatch({\n                            type: ActionTypes.SUGGESTIONS_CHANGED,\n                            id: suggestionId\n\n                        })\n                }\n                    );\n                }\n\n\n          });\n        }\n            }\n\n\n\n\n\n\n}\n\nexport function setMatchedPretext(suggestionId, text){\n\n    return (dispatch, getState) =>\n    {\n        dispatch({type: ActionTypes.SET_MATCHED_PRETEXT,id: suggestionId,text: text});\n\n\n\n    }\n\n}\n\nexport function addSuggestions(suggestionId,  terms, items, component){\n\n    return (dispatch, getState) =>\n    {\n        dispatch({type: ActionTypes.ADD_SUGGESTIONS,id: suggestionId,terms:terms, items: items, component:component});\n\n\n\n    }\n\n}\n\nexport function clearSelection(suggestionId){\n\n    return (dispatch, getState) =>\n    {\n        dispatch({type: ActionTypes.CLEAR_SELECTION,id: suggestionId});\n\n\n\n    }\n\n}\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/static/js/app/actions/chatActions.js\n **/"],"sourceRoot":""}