{"version":3,"sources":["webpack:///./web/static/js/app/actions/xmppActions.js?aeff"],"names":[],"mappings":"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","file":"0.b191e5ea51214bcb29ab.hot-update.js","sourcesContent":["/*global me, app, client*/\n\"use strict\";\n\nvar _ = require('underscore');\nvar async = require('async');\nvar crypto = require('crypto');\nvar bows = require('bows');\nvar uuid = require('node-uuid');\nvar XmppUtils = require(\"../utils/XmppUtils\");\n\n\nimport ActionTypes  from '../constants';\n\n\nvar log = bows('Otalk');\nvar ioLogIn = bows('<< in');\nvar ioLogOut = bows('>> out');\n\nexport function discoCapsQueue(pres)\n{\n    async.queue(function (pres, cb) {\n    var jid = pres.from;\n    var caps = pres.caps;\n\n\n    var resource = Resource.get(jid);\n\n    client.getDiscoInfo(jid, caps.node + '#' + caps.ver, function (err, result) {\n        if (err) {\n            log.error('Couldnt get info for ' + caps.ver);\n            return cb();\n        }\n        if (client.verifyVerString(result.discoInfo, caps.hash, caps.ver)) {\n            log.info('Saving info for ' + caps.ver);\n            var data = result.discoInfo;\n        } else {\n            log.info('Couldnt verify info for ' + caps.ver + ' from ' + jid);\n            cb();\n        }\n    });\n})}\n\nexport function loadRooms(){\n     return (dispatch, getState) =>\n    {\n          httpGet('/api/v1/rooms')\n         .then((data) => {\n        dispatch({\n          type:ActionTypes.LOAD_ROOMS,\n          rooms: data,\n        });\n\n\n      });\n\n    }\n\n\n}\n\nexport function   getAllMessages() {\n\n    return (dispatch, getState) =>\n    {\n\n        const {xmpp} = getState();\n        const client = xmpp.client;\n        const jid = xmpp.jid;\n\n\n        client.searchHistory({\n            with: jid,\n            rsm: {max: 500, before: true},\n            complete: false\n        }, function (err, res) {\n            var items = res.mamResult.items || [];\n\n            var messages = items.map(function (x) {\n                return  Object.assign({},x.forwarded.message,{id:x.id,from:x.forwarded.message.from.bare,to:x.forwarded.message.to.bare})\n            });\n\n            dispatch({\n                type: ActionTypes.LOAD_MESSAGES,\n                messages: messages,\n\n            });\n        });\n\n        client.searchHistory({\n            from: jid,\n            rsm: {max: 500, before: true},\n            complete: false\n        }, function (err, res) {\n            var items = res.mamResult.items || [];\n\n            var messages = items.map(function (x) {\n                return  Object.assign({},x.forwarded.message,{id:x.id,from:x.forwarded.message.from.bare,to:x.forwarded.message.to.bare})\n            });\n\n            dispatch({\n                type: ActionTypes.LOAD_MESSAGES,\n                messages: messages,\n\n            });\n        })\n\n    }\n\n}\n\n\nexport function  createMessage(msg) {\n    // simulate writing to a database\n      var timestamp = Date.now();\n      var data = {\n          archivedId: msg.id || uuid.v4(),\n          owner: msg.owner||msg.from||app.me,\n          to: msg.to,\n          from: msg.from||app.me,\n          body: msg.body,\n          type: msg.type,\n          delay: msg.delay,\n          edited: msg.edited,\n          _created: msg.timestamp||timestamp,\n          from_full: msg.from,\n          to_full:msg.to\n      };\n      return data;\n  }\n\n\nexport function   getRoster(){\n\n        client.getRoster(function (err, resp) {\n            \n\n            if (resp.roster && resp.roster.items && resp.roster.items.length) {\n\n\n                _.each(resp.roster.items, function (item) {\n                    var data = {\n                        owner:resp.to.bare,\n                        jid: item.jid.jid,\n                        nickname: item.local,\n                        name: item.name,\n                        groups: item.groups,\n                        subscription: item.subscription,\n                        avatarID: \"\",\n                        resources: {},\n                        offlineStatus:{}\n                    };\n                    app.storage.roster.add(data);\n                });\n\n                var caps = client.updateCaps();\n\n                    client.sendPresence();\n                    client.enableCarbons();\n\n            }});\n\n    }\n\n\n\n\n    export function receiveContacts(rawContacts) {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_CONTACTS,\n            rawContacts: rawContacts\n        });\n    }\n\n\n\n    export function receiveCreatedContact(createdContact) {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_CREATED_CONTACTS,\n            createdContact: createdContact\n        });\n    }\n\n    export function receiveMucs(rawMucs) {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_MUCS,\n            rawMucs: rawMucs\n        });\n    }\n\n\n\n    export function  receiveCreatedMuc(createdMuc) {\n        dispatch({\n            type: ActionTypes.RECEIVE_RAW_CREATED_MUC,\n            createdMuc: createdMuc\n        });\n    }\n\n\n\nexport function xmppSession(client,dispatch,jid) {\n\n    client.on('*', function (name, data) {\n        if (name === 'raw:incoming') {\n            ioLogIn.debug(data.toString());\n        } else if (name === 'raw:outgoing') {\n            ioLogOut.debug(data.toString());\n        }\n    });\n\n    client.on('credentials:update', function (creds) {\n        client.config.credentials = creds;\n            dispatch({\n             type: ActionTypes.CLIENT_ON_CREDENTIALS_UPDATE,\n                creds:creds\n          });\n\n    });\n\n    client.on('disconnected', function (err) {\n\n        dispatch(\n            {\n             type: ActionTypes.CLIENT_ON_DISCONNECTED,\n              err: err\n            }\n        );\n\n    });\n\n    client.on('auth:failed', function () {\n\n        dispatch(\n            {\n            type: ActionTypes.CLIENT_ON_AUTHFAILED\n        }\n        );\n\n    });\n\n    client.on('stream:management:resumed', function () {\n        dispatch({\n           type: ActionTypes.CLIENT_ON_STREAM_MANAGEMENT_RESUMED\n        });\n\n    });\n\n    client.on('session:started', function (jid) {\n\n        client.sendPresence();\n        dispatch({\n            type: ActionTypes.CLIENT_ON_SESSION_STARTED,\n            jid: jid,\n            client: client\n        });\n\n        });\n\n\n\n\n    client.on('roster:update', function (iq) {\n        iq = iq;\n         dispatch({\n            type: ActionTypes.CLIENT_ON_ROSTER_UPDATE,\n            iq:iq\n        });\n\n    });\n\n    client.on('subscribe', function (pres) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_SUBSCRIBE,\n            pres:pres\n        });\n\n    });\n\n    client.on('available', function (pres) {\n        \n        dispatch({\n            type: ActionTypes.CLIENT_ON_AVAILABLE,\n            pres: pres\n        });\n\n    });\n\n    client.on('unavailable', function (pres) {\n        \n        dispatch({\n            type: ActionTypes.CLIENT_ON_UNAVALILABLE,\n            pres: pres\n        });\n\n    });\n\n    client.on('avatar', function (info) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_AVATAR,\n            info: info\n        });\n\n    });\n\n    client.on('chatState', function (info) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_CHAT_STATE,\n            info: info\n        });\n\n    });\n\n    client.on('chat', function (msg) {\n\n        \n         dispatch({\n            type: ActionTypes.CLIENT_ON_CHAT,\n            msg: msg\n        });\n\n    });\n\n    client.on('groupchat', function (msg) {\n        \n         dispatch({\n            type: ActionTypes.CLIENT_ON_GROUPCHAT,\n            msg: msg\n        });\n\n\n    });\n\n    client.on('groupchat:subject', function (msg) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_GROUPCHAT_SUBJECT,\n            msg: msg\n        });\n\n\n    });\n\n    client.on('replace', function (msg) {\n        \n        dispatch({\n            type: ActionTypes.CLIENT_ON_REPLACE,\n            msg: msg\n        });\n\n\n    });\n\n    client.on('receipt', function (msg) {\n        \n        dispatch({\n            type: ActionTypes.CLIENT_ON_RECEIPT,\n            msg: msg\n        });\n\n\n    });\n\n    client.on('carbon:received', function (carbon) {\n\n        var mereg = new RegExp(jid);\n        if (!mereg.test(jid)) return ;\n\n        dispatch({\n            type: ActionTypes.CLIENT_ON_CARBON_RECEIVED,\n            carbon: carbon\n        });\n\n\n\n    });\n\n    client.on('carbon:sent', function (carbon) {\n        var mereg = new RegExp(jid);\n        if (!mereg.test(jid)) return ;\n         dispatch({\n            type: ActionTypes.CLIENT_ON_CARBON_SENT,\n            carbon: carbon\n        });\n\n\n    });\n\n    client.on('disco:caps', function (pres) {\n         dispatch({\n            type: ActionTypes.CLIENT_ON_DISCO_CAPS,\n            pres: pres\n        });\n        if (pres.caps.hash) {\n            log.info('Caps from ' + pres.from + ' ver: ' + pres.caps.ver);\n            discoCapsQueue(pres);\n        }\n    });\n\n    client.on('stanza:acked', function (stanza) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_STANZA_ACKED,\n            stanza: stanza\n        });\n\n    });\n\n    client.on('jingle:incoming', function (session) {\n         dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_INCOMING,\n            session: session\n        });\n\n    });\n\n    client.on('jingle:outgoing', function (session) {\n\n         dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_OUTGOING,\n            session: session\n        });\n\n    });\n\n    client.on('jingle:terminated', function (session) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_TERMINATED,\n            session: session\n        });\n\n    });\n\n    client.on('jingle:accepted', function (session) {\n         dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_ACCEPTED,\n            session: session\n        });\n\n    });\n\n    client.on('jingle:localstream:added', function (stream) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_LOCALSTREAM_ADDED,\n            stream: stream\n        });\n\n    });\n\n    client.on('jingle:localstream:removed', function () {\n         dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_LOCALSTREAM_REMOVED\n        });\n\n\n    });\n\n    client.on('jingle:remotestream:added', function (session) {\n       dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_REMOTESTREAM_ADDED,\n            session: session\n        });\n\n    });\n\n    client.on('jingle:remotestream:removed', function (session) {\n        dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_REMOTESTREAM_REMOVED\n        });\n\n    });\n\n    client.on('jingle:ringing', function (session) {\n       dispatch({\n            type: ActionTypes.CLIENT_ON_JINGLE_RINGING,\n            session: session\n        });\n\n    });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/static/js/app/actions/xmppActions.js\n **/"],"sourceRoot":""}